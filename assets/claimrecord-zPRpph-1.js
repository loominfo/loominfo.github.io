import{k as e,l as t,p as s,m as a,n as r,o as n,g as c,u as l,x as i,z as o,b as d,d as x,f as m,C as Q,e as h,r as p,t as y,L as u,j as f,af as v,aU as g,E as L,D as j}from"./index-B22ef-ay.js";import{d as w}from"./dayjs.min-Ct18seUN.js";import{A as N}from"./arrow-left-b9rq6gzM.js";const b={mint:{icon:"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='none'%20version='1.1'%20width='36'%20height='36'%20viewBox='0%200%2036%2036'%3e%3cg%20transform='matrix(1,0,0,-1,0,72)'%3e%3cpath%20d='M13.4297,67.1484L15.8203,63L13.4297,67.1484L15.8203,63L15.75,63L10.6875,63Q9.49219,63,8.71875,63.8438Q7.875,64.6172,7.875,65.8125Q7.875,67.0078,8.71875,67.7812Q9.49219,68.625,10.6875,68.625L10.8281,68.625Q12.5156,68.5547,13.4297,67.1484ZM4.5,65.8125Q4.5,64.2656,5.20312,63L2.25,63Q1.26562,63,0.632812,62.3672Q0,61.7344,0,60.75L0,56.25Q0,55.2656,0.632812,54.6328Q1.26562,54,2.25,54L33.75,54Q34.7344,54,35.3672,54.6328Q36,55.2656,36,56.25L36,60.75Q36,61.7344,35.3672,62.3672Q34.7344,63,33.75,63L30.7969,63Q31.5,64.2656,31.5,65.8125Q31.4297,68.41409999999999,29.6719,70.1719Q27.9141,71.9297,25.3125,72L25.1719,72Q21.5859,71.8594,19.6875,68.9062L18,65.9531L16.3125,68.83590000000001Q14.4141,71.8594,10.8281,72L10.6875,72Q8.08594,71.9297,6.32812,70.1719Q4.57031,68.41409999999999,4.5,65.8125ZM28.125,65.8125Q28.125,64.6172,27.2812,63.8438Q26.5078,63,25.3125,63L20.25,63L20.1797,63L22.6406,67.1484Q23.4844,68.5547,25.1719,68.625L25.3125,68.625Q26.5078,68.625,27.2812,67.7812Q28.125,67.0078,28.125,65.8125ZM2.25,51.75L2.25,39.375L2.25,51.75L2.25,39.375Q2.32031,37.96875,3.23438,36.984375Q4.21875,36.0703125,5.625,36L15.75,36L15.75,51.75L2.25,51.75ZM20.25,36L30.375,36L20.25,36L30.375,36Q31.7812,36.0703125,32.7656,36.984375Q33.6797,37.96875,33.75,39.375L33.75,51.75L20.25,51.75L20.25,36Z'%20fill='%23A64FE8'%20fill-opacity='1'%20style='mix-blend-mode:passthrough'/%3e%3c/g%3e%3c/svg%3e",title:g("history.ClaimRecord.text1"),color:"#A64FE8"},delegate:{icon:"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='none'%20version='1.1'%20width='36'%20height='36'%20viewBox='0%200%2036%2036'%3e%3cg%20transform='matrix(1,0,0,-1,0,72)'%3e%3cpath%20d='M36,66.375Q35.9297,64.4766,33.3281,63Q30.0938,61.2422,24.6797,60.8203Q24.3281,61.0312,23.9062,61.1719Q19.6172,62.9297,13.5,63Q12.6562,63,11.8125,62.9297L11.6719,63Q9.07031,64.4766,9,66.375Q9.14062,68.7656,12.9375,70.3828Q16.7344,71.9297,22.5,72Q28.2656,71.9297,32.0625,70.3828Q35.8594,68.7656,36,66.375ZM11.3203,60.6797Q12.375,60.75,13.5,60.75Q16.8047,60.75,19.5469,60.1172Q22.3594,59.5547,24.2578,58.5703Q26.9297,57.0938,27,55.125Q27,54.7031,26.8594,54.2812Q26.2969,52.875,24.3984,51.8203Q24.3281,51.75,24.3281,51.75Q22.4297,50.6953,19.6172,50.1328Q16.875,49.5,13.5,49.5Q7.03125,49.5703,3.09375,51.5391Q2.88281,51.6797,2.67188,51.75Q0.0703125,53.226600000000005,0,55.125Q0.0703125,57.023399999999995,2.53125,58.4297Q4.99219,59.835899999999995,9,60.398399999999995Q10.125,60.6094,11.3203,60.6797ZM29.25,55.125Q29.1094,57.4453,27.5625,58.851600000000005Q30.5859,59.3438,32.9062,60.3281Q34.6641,61.0312,36,62.085899999999995L36,59.625Q35.9297,57.5156,32.9062,56.039100000000005Q31.3594,55.2656,29.25,54.773399999999995Q29.25,54.914100000000005,29.25,55.125ZM27,48.375Q26.9297,46.4766,24.3281,45Q24.1875,44.92969,24.0469,44.85938Q23.9766,44.85938,23.9062,44.78906Q19.9688,42.82031,13.5,42.75Q10.125,42.75,7.38281,43.38281Q4.57031,43.94531,2.67188,45Q0.0703125,46.4766,0,48.375L0,50.8359Q1.33594,49.7812,3.09375,49.0781Q7.38281,47.3203,13.5,47.25Q19.6172,47.3203,23.9062,49.0781Q24.75,49.4297,25.5234,49.8516Q26.1562,50.2031,26.7188,50.625Q26.7891,50.6953,26.9297,50.7656Q26.9297,50.8359,27,50.8359L27,50.625L27,50.2031L27,48.375ZM29.25,48.375L29.25,50.625L29.25,48.375L29.25,50.625L29.25,52.4531Q31.2891,52.875,32.9062,53.5781Q34.6641,54.2812,36,55.335899999999995L36,52.875Q36,51.75,34.9453,50.6953Q33.1172,48.9375,29.25,48.0234Q29.25,48.1641,29.25,48.375ZM13.5,40.5Q19.6172,40.57031,23.9062,42.32812Q25.6641,43.03125,27,44.08594L27,41.625Q26.8594,39.23438,23.0625,37.61719Q19.2656,36.0703125,13.5,36Q7.73438,36.0703125,3.9375,37.61719Q0.140625,39.23438,0,41.625L0,44.08594Q1.33594,43.03125,3.09375,42.32812Q7.38281,40.57031,13.5,40.5Z'%20fill='%23EAB308'%20fill-opacity='1'%20style='mix-blend-mode:passthrough'/%3e%3c/g%3e%3c/svg%3e",title:g("history.ClaimRecord.text2"),color:"#EAB308"}};function k(){const{t:g}=l(),k=i(),A=o(),B=d(),{tokenList:M}=x(),D=m(),{address:C}=Q(),{role:Z}=h(),[q,F]=p.useState([]),[I,Y]=p.useState(!0);p.useEffect((()=>{_()}),[Z,C,D,M]);const _=async()=>{try{const l=await(async(l,i)=>{var o;const d=e(c),x=56==d?{Authorization:"Bearer ".concat(r[d])}:void 0,m=t(null==i?void 0:i.where),Q=s("query rewards {\n    rewards(\n          first: ".concat(null!=(o=null==i?void 0:i.first)?o:1e3,"\n          ").concat((null==i?void 0:i.orderBy)?"orderBy: ".concat(i.orderBy):"","\n          ").concat((null==i?void 0:i.orderDirection)?"orderDirection: ".concat(i.orderDirection):"","\n          ").concat(m,"\n        ) {\n          amount\n          cardId\n          createAt\n          token\n        }\n      }")),{rewards:h}=await l.fetchQuery({queryKey:[null==i?void 0:i.queryKey],queryFn:async()=>a(n[d],Q,void 0,x)});return h})(B,{queryKey:"children",orderBy:"createAt",orderDirection:"desc",where:{cardId:Z.tokenId,token:M[Z.tokenSubscript].token}}),i=await(async(l,i)=>{var o;const d=e(c),x=56==d?{Authorization:"Bearer ".concat(r[d])}:void 0,m=t(null==i?void 0:i.where),Q=s("query brokerages {\n    brokerages(\n          first: ".concat(null!=(o=null==i?void 0:i.first)?o:1e3,"\n          ").concat((null==i?void 0:i.orderBy)?"orderBy: ".concat(i.orderBy):"","\n          ").concat((null==i?void 0:i.orderDirection)?"orderDirection: ".concat(i.orderDirection):"","\n          ").concat(m,"\n        ) {\n          amount\n          cardId\n          createAt\n          token\n        }\n      }")),{brokerages:h}=await l.fetchQuery({queryKey:[null==i?void 0:i.queryKey],queryFn:async()=>a(n[d],Q,void 0,x)});return h})(B,{queryKey:"children",orderBy:"createAt",orderDirection:"desc",where:{cardId:Z.tokenId,token:M[Z.tokenSubscript].token}}),o=[],d=[];for(let e=0;e<l.length;e++)o.push({type:"mint",amount:y(u(BigInt(l[e].amount))),time:w.unix(l[e].createAt).format("YYYY/MM/DD HH:mm:ss")});for(let e=0;e<i.length;e++)d.push({type:"delegate",amount:y(u(BigInt(i[e].amount))),time:w.unix(i[e].createAt).format("YYYY/MM/DD HH:mm:ss")});const x=o.concat(d);x.sort(((e,t)=>{const s=w(e.time).valueOf();return w(t.time).valueOf()-s})),F(x),Y(!1)}catch(l){Y(!1)}};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"h-screen overflow-auto px-[15px] pb-5 pt-[20px] sm:hidden",children:[f.jsxs("div",{className:"grid grid-cols-3",children:[f.jsx("div",{className:"flex items-center",onClick:()=>k(-1),children:f.jsx(N,{className:"text-[#8F9CA8]"})}),f.jsx("div",{className:"w-full text-center text-[17px] text-[#333333]",children:g("history.ClaimRecord.text3")}),f.jsx("div",{})]}),I?f.jsx(f.Fragment,{children:f.jsxs("div",{className:"mt-[30%] flex flex-col items-center justify-center text-gray-500",children:[f.jsx(v,{className:"mb-5 animate-spin",size:60,color:"#6b7280"}),g("Loading...")]})}):f.jsx("div",{className:"no-scrollbar mt-5 space-y-4 overflow-scroll pb-[80px]",children:q.length>0?f.jsx(f.Fragment,{children:q.map(((e,t)=>f.jsxs("div",{className:"flex items-end justify-between rounded-xl p-4 text-sm shadow-[0_2px_4px_0_rgba(0,0,0,0.05)]",children:[f.jsxs("div",{className:"flex items-end space-x-4",children:[f.jsx("img",{src:b[e.type].icon,alt:"type",className:"relative z-10"}),f.jsxs("div",{className:"flex flex-col space-y-1",children:[f.jsxs("span",{className:"text-[#111827]",children:[b[e.type].title," "]}),f.jsx("span",{className:"text-[#6B7280]",children:e.time})]})]}),f.jsxs("span",{style:{color:b[e.type].color},children:["+",e.amount]})]},t)))}):f.jsx(L,{text:g("history.ClaimRecord.text4"),divclassName:"h-[calc(100vh-190px)] py-0",className:"mt-5 text-center text-[#8A8A8A]"})})]}),f.jsx(j,{open:"PC"==A&&!0,onOpenChange:()=>k(-1),className:"px-0 py-4 sm:block",children:f.jsxs("div",{className:"flex flex-col px-[27px]",children:[f.jsxs("span",{className:"text-[20px] text-[#101828]",children:[" ",g("history.ClaimRecord.text3")]}),I?f.jsx(f.Fragment,{children:f.jsxs("div",{className:"my-30 flex flex-col items-center justify-center text-gray-500",children:[f.jsx(v,{className:"mb-5 animate-spin",size:60,color:"#6b7280"}),g("Loading...")]})}):f.jsx("div",{className:"no-scrollbar mt-5 h-[500px] w-full space-y-4 overflow-scroll",children:q.length>0?f.jsx(f.Fragment,{children:q.map(((e,t)=>f.jsxs("div",{className:"m-[1px] mb-[10px] flex w-full items-end justify-between rounded-xl p-4 text-sm shadow-[0px_0px_4px_0px_rgba(0,0,0,0.15)]",children:[f.jsxs("div",{className:"flex items-end space-x-6",children:[f.jsx("img",{src:b[e.type].icon,alt:"type",className:"relative z-10"}),f.jsxs("div",{className:"flex flex-col space-y-1",children:[f.jsxs("span",{className:"text-[#111827]",children:[b[e.type].title," "]}),f.jsx("span",{className:"text-[#6B7280]",children:e.time})]})]}),f.jsxs("span",{style:{color:b[e.type].color},children:["+",e.amount]})]},t)))}):f.jsx(L,{text:g("history.ClaimRecord.text4"),imageWidth:120,divclassName:" h-[500px] py-0",className:"mt-5 text-center text-[16px] text-[#8A8A8A]"})})]})})]})}export{k as default};
