System.register(["./index-legacy-C2ELeSjt.js","./modeal1-legacy-07PKUq05.js","./back-legacy-D3nJS_VV.js","./BonusTemplate-legacy-DgWrQAEx.js","./USDTToken-legacy-W1aMGjpd.js","./parseEther-legacy-SZc9d0xP.js","./getBlock-legacy-DiGeeR0i.js"],(function(e,s){"use strict";var t,a,r,l,x,i,c,n,m,d,o,p,u,b,h,f,g,j,N,w,v,y,S,C,k,D,E,L,_,F,B,I,M,T,z;return{setters:[e=>{t=e.r,a=e.j,r=e.aD,l=e.aE,x=e.c,i=e.Y,c=e.d,n=e.a,m=e.u,d=e.x,o=e.b,p=e.f,u=e.C,b=e.e,h=e.aF,f=e.aG,g=e.J,j=e.g,N=e.L,w=e.af,v=e.E,y=e.B,S=e.D,C=e.q,k=e.s,D=e.w,E=e.h,L=e.i},e=>{_=e.m,F=e.a},e=>{B=e.B},e=>{I=e.B},e=>{M=e.U},e=>{T=e.p},e=>{z=e.g}],execute:function(){e("default",(function(){const{tokenList:e,refetch:s}=c(),{toast:r}=n(),{t:l,i18n:x}=m(),P=d(),U=o(),[O,q]=t.useState(!1),[A,Z]=t.useState(!1),[R,J]=t.useState(!1),[X,$]=t.useState(!0),[G,K]=t.useState(!0),[V,W]=t.useState(!1),[te,ae]=t.useState(0),[re,le]=t.useState(!0),xe=p(),{address:ie}=u(),{role:ce,updateRole:ne}=b(),me=[1,2],[de,oe]=t.useState(0),[pe,ue]=t.useState({price:0,power:0,sold:0,max:0}),[be,he]=t.useState({price:0,power:0,sold:0,max:0}),[fe,ge]=t.useState({hours:0,minutes:0,seconds:0}),[je,Ne]=t.useState(!1);t.useEffect((()=>{je&&we()}),[ce,ie,xe,e,je]),t.useEffect((()=>{let e,s=!0;const t=async()=>{try{const e=1747728e3-await(async()=>{const e=(await z(j)).timestamp;return Number(e)})();return e<=0?(s&&(Ne(!0),await we(),ge({hours:0,minutes:0,seconds:0})),!0):(s&&ge({hours:Math.floor(e%86400/3600),minutes:Math.floor(e%3600/60),seconds:Math.floor(e%60)}),!1)}catch(e){return!1}};return(async()=>{await t()||(e=setInterval((async()=>{await t()&&clearInterval(e)}),1e3))})(),()=>{s=!1,clearInterval(e)}}),[]);const we=async()=>{try{if(le(!0),ie){const s=await ve(Number(ce.tokenSubscript));W(s);const t=h(f([{name:"medalType",type:"uint8"},{name:"cardId",type:"uint256"}],[me[0],BigInt(ce.tokenId)])),a=h(f([{name:"medalType",type:"uint8"},{name:"cardId",type:"uint256"}],[me[1],BigInt(ce.tokenId)])),[r,l,x,i,c]=await g(j,{contracts:[{abi:I.abi,address:e[ce.tokenSubscript].bonus,functionName:"configOf",args:[me[0]]},{abi:I.abi,address:e[ce.tokenSubscript].bonus,functionName:"configOf",args:[me[1]]},{abi:I.abi,address:e[ce.tokenSubscript].bonus,functionName:"isBuied",args:[t]},{abi:I.abi,address:e[ce.tokenSubscript].bonus,functionName:"isBuied",args:[a]},{abi:M.abi,address:M.networks[xe].address,functionName:"balanceOf",args:[ie]}]});r.error||l.error||(ue({price:Number(r.result[0]),power:Number(r.result[1]),max:Number(r.result[2]),sold:Number(r.result[3])}),he({price:Number(l.result[0]),power:Number(l.result[1]),max:Number(l.result[2]),sold:Number(l.result[3])})),x.error||i.error||($(x.result),K(i.result)),c.error||ae(Number(N(c.result)))}}finally{le(!1)}},ve=async s=>{const t=async t=>await C(j,{abi:I.abi,address:e[s].bonus,functionName:"configOf",args:[t]}),[a,r]=await Promise.all([t(1),t(2)]);return a[2]+a[3]==0n&&r[2]+r[3]==0n},ye=async s=>{if(ie){if(s==me[1]?q(!0):Z(!0),s==me[1]){if(te<be.price)return q(!1),void r(l("Subscribe.text15"))}else if(te<pe.price)return Z(!1),void r(l("Subscribe.text15"));const t=await C(j,{abi:M.abi,address:M.networks[xe].address,functionName:"allowance",args:[ie,e[ce.tokenSubscript].bonus]}),a=1==s?pe.price:be.price;Number(N(t))>a?Ce(s):Se(s)}},Se=async s=>{try{if(s){const{request:t}=await k(j,{abi:M.abi,address:M.networks[xe].address,functionName:"approve",args:[e[ce.tokenSubscript].bonus,T("10000000000000")]}),a=await D(j,t);await E(j,{hash:a}),Ce(s)}}catch(e){s==me[1]?q(!1):Z(!1)}},Ce=async t=>{try{t==me[1]?q(!0):Z(!0);const{result:a,request:x}=await k(j,{abi:I.abi,address:e[ce.tokenSubscript].bonus,functionName:"buyMedal",args:[t,BigInt(ce.tokenId)]}),i=await D(j,x);await E(j,{hash:i});const c=await E(j,{hash:i});await L(U,c.blockNumber),we(),t==me[1]?(q(!1),K(!0)):(Z(!1),$(!0)),r(l("Subscribe.text1")),J(!1),s()}catch(x){t==me[1]?q(!1):Z(!1);const s=x.stack,a=s.match(/transaction:\s+(.+)/),i=s.match(/MetaMask Tx Signature:\s+(.+)/);if(i&&"User denied transaction signature."==i[1])return r(l("Subscribe.text2"));if(!a)return r(l("Subscribe.text2"));if("revert Invalid childrenCount"===a[1]||"Invalid card owner"===a[1]||"Invalid MedalType"===a[1])return r(l("Subscribe.text16"))}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"fixed z-10 grid w-full grid-cols-3 bg-white p-[17px_16px] sm:hidden",children:[a.jsx("div",{className:"flex items-center pl-2",onClick:()=>P(-1),children:a.jsx("img",{src:B,alt:"back",className:"w-4"})}),a.jsx("div",{className:"text-center text-[16px] text-[#333333]",children:l("Subscribe.text3")})]}),a.jsxs("div",{className:i("bg-white p-[10px_16px_20px] sm:m-[0_auto] sm:flex sm:w-[1100px] sm:flex-col sm:pt-[78px]","en"==x.language&&"pt-[55px]"),children:[a.jsxs("div",{className:"mt-[80px]",children:[a.jsx("img",{src:H,className:"w-full sm:hidden",alt:""}),a.jsx("img",{src:Q,className:"hidden w-full sm:flex",alt:""})]}),a.jsx("div",{className:"my-[20px] hidden text-[16px] font-medium text-[#3D3D3D] sm:flex sm:text-[20px]",children:l("Subscribe.text3")}),a.jsxs("div",{className:"flex flex-col sm:mx-auto sm:grid sm:grid-cols-2",children:[a.jsxs("div",{className:"order-2 border-t border-[#F0F0F0] pt-[20px] sm:order-2 sm:ml-[40px] sm:border-l sm:border-t-0 sm:py-0 sm:pl-[50px]",children:[a.jsx("h4",{className:"sm mb-2 mt-3 font-bold text-[#333333] sm:text-[18px]",children:l("Subscribe.text30")}),a.jsxs("div",{className:"relative sm:flex sm:items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{children:[a.jsx("h3",{className:"mb-2 font-bold text-[#333333] sm:text-[16px] sm:font-medium",children:l("Subscribe.text23")}),a.jsxs("ol",{className:"list-decimal space-y-1 pl-5 text-sm text-[#797979] sm:space-y-3 sm:text-[14px]",children:[a.jsx("li",{children:l("Subscribe.text24")}),a.jsx("li",{children:l("Subscribe.text24_1")})]})]}),a.jsx("h3",{className:"mb-2 font-bold text-[#333333] sm:text-[16px] sm:font-medium",children:l("Subscribe.text25")}),a.jsx("div",{className:"relative flex sm:mb-0",children:a.jsxs("ol",{className:"list-decimal space-y-1 pl-5 text-sm text-[#797979] sm:space-y-3 sm:text-[14px]",children:[a.jsx("li",{children:l("Subscribe.text26")}),a.jsx("li",{children:l("Subscribe.text27")}),a.jsx("li",{children:l("Subscribe.text28")})]})})]}),a.jsx("img",{src:ee,className:"absolute right-0 top-0 sm:h-[237px] sm:w-[234px]",alt:""})]}),a.jsxs("div",{className:"mb-[190px] mt-2 sm:mb-0",children:[a.jsx("h3",{className:"mb-2 font-bold text-[#333333] sm:text-[16px] sm:font-medium",children:l("Subscribe.text31")}),a.jsxs("ol",{className:"list-decimal space-y-1 pl-5 text-sm text-[#797979] sm:space-y-3 sm:text-[14px]",children:[a.jsx("li",{children:l("Subscribe.text32")}),a.jsx("li",{children:l("Subscribe.text33")}),a.jsx("li",{children:l("Subscribe.text34")})]})]})]}),a.jsxs("div",{className:"order-1 sm:order-1 sm:flex sm:flex-col",children:[a.jsx("div",{className:"my-[20px] text-[16px] font-medium text-[#3D3D3D] sm:hidden sm:text-[20px]",children:l("Subscribe.text3")}),re?a.jsxs("div",{className:"mt-[30%] flex flex-col items-center justify-center text-gray-500",children:[a.jsx(w,{className:"mb-5 animate-spin",size:60,color:"#6b7280"}),l("Loading...")]}):V?a.jsx(v,{text:l("Subscribe.text35"),imageWidth:97.5,divclassName:"py-[30px] sm:pt-[20%]",className:"pt-1 text-center text-[#8A8A8A] sm:pt-[10px]"}):a.jsxs(a.Fragment,{children:[pe.max>0&&a.jsxs("div",{className:"mb-6 flex justify-between rounded-lg border border-[#E4E7EC] bg-white p-[18px_19px] sm:mb-[12px] sm:justify-start sm:p-[27px_32px]",children:[a.jsx("img",{src:_,alt:"modealimg1",className:"h-[120px] w-[120px] sm:w-[127px]"}),a.jsxs("div",{className:"ml-[15px] w-full sm:ml-[20px]",children:[a.jsxs("div",{className:i("en"==x.language?"flex flex-col items-baseline sm:flex-row":"flex items-center"),children:[a.jsx("span",{className:"text-center text-[16px] font-medium text-[#333333] sm:text-[16px]",children:l("Subscribe.text12")}),a.jsx("div",{className:i("rounded-[3px] bg-[#EEEEEE] p-[2px_3px] text-center text-[12px] text-[#3D3D3D] sm:text-[12px]","en"!=x.language&&"ml-[9px]"),children:l("Subscribe.text10",{max:pe.max})})]}),a.jsxs("div",{className:"text-[12px] text-[#3D3D3D]",children:[a.jsxs("span",{children:[l("Subscribe.text13"),":"]}),a.jsx("span",{className:"text-[#2C2C2C]",children:pe.power})]}),a.jsxs("div",{className:"mb-[3px] mt-[10px] flex items-center justify-between text-[12px] text-[#4B5563] sm:text-[22px]",children:[a.jsxs("div",{className:"flex items-center text-[12px]",children:[a.jsxs("span",{className:"text-[#797979]",children:[" ",l("Subscribe.text18")," "]}),a.jsxs("span",{className:"text-[#2C2C2C]",children:[" ",pe.sold," "]})]}),a.jsxs("div",{className:"flex items-center text-[12px]",children:[a.jsxs("span",{className:"text-[#797979]",children:[" ",l("Subscribe.text19")," "]}),a.jsxs("span",{className:"text-[#2C2C2C]",children:[pe.max-pe.sold," "]})]})]}),a.jsx(Y,{value:pe.sold/pe.max*100,className:"w-full bg-[#F3F4F6] sm:w-[320px]"}),a.jsxs("div",{className:"mt-[12px] flex justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-[18px]/6 font-black text-black sm:text-[18px]",children:pe.price}),a.jsxs("span",{className:"text-[12px] text-[#3D3D3D]",children:[" ","U"]})]}),a.jsx(y,{onClick:()=>{J(!0),oe(1)},isLoading:A,disabled:X||pe.max==pe.sold,type:"green",className:i("flex justify-center p-[8px_24px] text-[16px] sm:p-[8px_24px] sm:text-[14px]","en"==x.language&&"px-[10px]"),children:pe.max==pe.sold?l("Subscribe.text41"):l(X?"Subscribe.text17":"Subscribe.text14")})]})]})]}),be.max>0&&a.jsxs("div",{className:"mb-6 flex rounded-lg border border-[#E4E7EC] bg-white p-[18px_19px] sm:mb-0 sm:justify-start sm:p-[27px_32px]",children:[a.jsx("img",{src:F,alt:"modealimg1",className:"h-[130px] w-[127px] sm:w-[127px]"}),a.jsxs("div",{className:"ml-[15px] w-full sm:ml-[20px]",children:[a.jsxs("div",{className:i("en"==x.language?"flex flex-col items-baseline sm:flex-row":"flex items-center"),children:[a.jsx("span",{className:"text-center text-[16px] font-medium text-[#333333] sm:text-[16px]",children:l("Subscribe.text9")}),a.jsx("div",{className:i("rounded-[3px] bg-[#EEEEEE] p-[2px_3px] text-center text-[12px] text-[#3D3D3D] sm:text-[12px]","en"!=x.language&&"ml-[9px]"),children:l("Subscribe.text10",{max:be.max})})]}),a.jsxs("div",{className:"text-[12px] text-[#3D3D3D]",children:[a.jsxs("span",{children:[l("Subscribe.text13"),":"]}),a.jsx("span",{className:"text-[#2C2C2C]",children:be.power})]}),a.jsxs("div",{className:"mb-[3px] mt-[10px] flex items-center justify-between text-[12px] text-[#4B5563] sm:text-[22px]",children:[a.jsxs("div",{className:"flex items-center text-[12px]",children:[a.jsxs("span",{className:"text-[#797979]",children:[" ",l("Subscribe.text18")," "]}),a.jsxs("span",{className:"text-[#2C2C2C]",children:[" ",be.sold," "]})]}),a.jsxs("div",{className:"flex items-center text-[12px]",children:[a.jsxs("span",{className:"text-[#797979]",children:[" ",l("Subscribe.text19")," "]}),a.jsxs("span",{className:"text-[#2C2C2C]",children:[be.max-be.sold," "]})]})]}),a.jsx(Y,{value:be.sold/be.max*100,className:"w-full bg-[#F3F4F6] sm:w-[320px]"}),a.jsxs("div",{className:"mt-[12px] flex justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-[18px]/6 font-black text-black sm:text-[18px]",children:be.price}),a.jsxs("span",{className:"text-[12px] text-[#3D3D3D]",children:[" ","U"]})]}),a.jsx(y,{onClick:()=>{J(!0),oe(2)},isLoading:O,disabled:G||be.max==be.sold,type:"green",className:i("flex justify-center p-[8px_24px] text-[16px] sm:p-[8px_24px] sm:text-[14px]","en"==x.language&&"px-[10px]"),children:be.max==be.sold?l("Subscribe.text41"):l(G?"Subscribe.text17":"Subscribe.text14")})]})]})]})]})]})]})]}),a.jsxs(S,{open:R,onOpenChange:()=>J(!1),className:"px-5 py-4",children:[a.jsx("img",{src:se,alt:""}),a.jsxs("div",{className:"mt-[12px] flex flex-col",children:[a.jsx("span",{className:"text-[18px] text-[#101828]",children:l("Subscribe.text11")}),a.jsx("span",{className:"text-[14px] text-[#475467]",children:l("Subscribe.text21",{price:2==de?be.price:pe.price})})]}),a.jsxs("div",{className:"mt-[16px] flex items-center space-x-3 rounded-[12px] border border-[#E4E7EC] p-[16px_19px]",children:[a.jsx("img",{src:2==de?F:_,width:40,alt:"modealimg",className:"rounded-[4px]"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[14px] text-[#344054]",children:l(2==de?"Subscribe.text9":"Subscribe.text12")}),a.jsxs("span",{className:"text-[14px] text-[#475467]",children:[l("Subscribe.text20"),"1"]})]})]}),a.jsxs("div",{className:"flex flex-col items-center justify-between sm:flex-row",children:[a.jsx(y,{onClick:()=>J(!1),type:"white",size:"large",className:"order-2 w-full sm:order-1 sm:w-[45%] sm:px-[40px] sm:text-[14px]",children:l("Cancel")}),a.jsx(y,{onClick:()=>{(async e=>{ye(e)})(de)},isLoading:2==de?O:A,type:"green",size:"large",className:"order-1 my-3 w-full sm:order-2 sm:w-[45%] sm:px-[40px] sm:text-[14px]",children:l("newMy.Upgrade4Dialog.text5")})]})]})]})}));var s="Progress",[P,U]=r(s),[O,q]=P(s),A=t.forwardRef(((e,s)=>{const{__scopeProgress:t,value:r=null,max:x,getValueLabel:i=J,...c}=e;(x||0===x)&&G(x);const n=G(x)?x:100;null!==r&&K(r,n);const m=K(r,n)?r:null,d=$(m)?i(m,n):void 0;return a.jsx(O,{scope:t,value:m,max:n,children:a.jsx(l.div,{"aria-valuemax":n,"aria-valuemin":0,"aria-valuenow":$(m)?m:void 0,"aria-valuetext":d,role:"progressbar","data-state":X(m,n),"data-value":m??void 0,"data-max":n,...c,ref:s})})}));A.displayName=s;var Z="ProgressIndicator",R=t.forwardRef(((e,s)=>{const{__scopeProgress:t,...r}=e,x=q(Z,t);return a.jsx(l.div,{"data-state":X(x.value,x.max),"data-value":x.value??void 0,"data-max":x.max,...r,ref:s})}));function J(e,s){return`${Math.round(e/s*100)}%`}function X(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function $(e){return"number"==typeof e}function G(e){return $(e)&&!isNaN(e)&&e>0}function K(e,s){return $(e)&&!isNaN(e)&&e<=s&&e>=0}R.displayName=Z;var V=A,W=R;function Y(e){const s=x.c(12);let t,r,l,c;s[0]!==e?(({className:t,value:l,...r}=e),s[0]=e,s[1]=t,s[2]=r,s[3]=l):(t=s[1],r=s[2],l=s[3]),s[4]!==t?(c=i("relative h-2 w-full overflow-hidden rounded-full border border-[#70C77F] bg-zinc-900/20 dark:bg-zinc-50/20",t),s[4]=t,s[5]=c):c=s[5];const n=`translateX(-${100-(l||0)}%)`;let m,d;return s[6]!==n?(m=a.jsx(W,{"data-slot":"progress-indicator",className:"bg-custom-gradient h-full w-full flex-1 rounded-full transition-all dark:bg-zinc-50",style:{transform:n}}),s[6]=n,s[7]=m):m=s[7],s[8]!==r||s[9]!==c||s[10]!==m?(d=a.jsx(V,{"data-slot":"progress",className:c,...r,children:m}),s[8]=r,s[9]=c,s[10]=m,s[11]=d):d=s[11],d}const H="/assets/modeallogo-DcNBIJKq.png",Q="/assets/pcmodeallogo-yTXawE8n.png",ee="/assets/modealimg-CZPp6gsa.png",se="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='none'%20version='1.1'%20width='56'%20height='56'%20viewBox='0%200%2056%2056'%3e%3cg%3e%3crect%20x='4'%20y='4'%20width='48'%20height='48'%20rx='24'%20fill='%23FEEFC7'%20fill-opacity='1'/%3e%3crect%20x='4'%20y='4'%20width='48'%20height='48'%20rx='24'%20fill-opacity='0'%20stroke-opacity='1'%20stroke='%23FFFAEB'%20fill='none'%20stroke-width='8'/%3e%3cg%3e%3cpath%20d='M28,38.5C21.93366,38.5,17,33.5663,17,27.5C17,21.43366,21.93366,16.5,28,16.5L28,18.01843C22.7715,18.01843,18.51843,22.2715,18.51843,27.5C18.51843,32.7285,22.7715,36.9816,28,36.9816C33.2285,36.9816,37.4816,32.7285,37.4816,27.5L39,27.5C39,33.5663,34.063900000000004,38.5,28,38.5ZM32.4988,28.888199999999998L26.42998,28.888199999999998L26.42998,22.81941L27.9459,22.81941L27.9459,27.369799999999998L32.4988,27.369799999999998L32.4988,28.888199999999998ZM26.91241,27.3322L35.4949,18.74973L36.5686,19.82342L27.9861,28.405900000000003L26.91241,27.3322Z'%20fill='%23DC6803'%20fill-opacity='1'%20style='mix-blend-mode:passthrough'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e"}}}));
