import{e,u as s,C as t,d as a,f as l,a as n,r as x,q as r,g as d,J as i,j as m,a2 as c,a3 as p,af as o,bN as f,bO as h,bP as u,O as j,bQ as g,Y as N,B as w,a7 as y,D as b,I as v,s as C,aN as M,w as F,h as k}from"./index-B22ef-ay.js";import{m as S,a as A}from"./modeal1-Bec6m7_0.js";import{S as O}from"./Sure-BGQ9yyxZ.js";import{M as I}from"./Medal-k9pLs_SY.js";import{B}from"./BonusTemplate-t2UEHmde.js";const E=()=>{const{role:E}=e(),{t:z}=s(),{address:D}=t(),{tokenList:L}=a(),T=l(),{toast:q}=n(),[P,J]=x.useState(!1),[Q,R]=x.useState(!1),[Y,_]=x.useState(!1),[G,H]=x.useState(!1),[K,U]=x.useState(!1),[V,W]=x.useState(!1),[X,Z]=x.useState([]),[$,ee]=x.useState(!1),[se,te]=x.useState(void 0),[ae,le]=x.useState("");x.useEffect((()=>{ne()}),[D,T,L]);const ne=async()=>{if(W(!0),D&&L){const e=[];for(let s=0;s<L.length;s++){const t=await r(d,{abi:I.abi,address:L[s].medal,functionName:"balanceOf",args:[D]}),a=await i(d,{contracts:Array.from({length:Number(t)},((e,t)=>({abi:I.abi,address:L[s].medal,functionName:"tokenOfOwnerByIndex",args:[D,t]})))}),l=(await i(d,{contracts:a.map((e=>({abi:B.abi,address:L[s].bonus,functionName:"infoOf",args:[e.result]})))})).map(((e,t)=>{const l=Number(e.result[0]);return{owner:D,medalType:l,medalId:Number(a[t].result),medal:L[s].medal}}));if(e.push({name:L[s].symbol,token:L[s].token,medals:[]}),l.length>0){for(let t=0;t<l.length;t++)e[e.length-1].medals.push({key:s,id:l[t].medalId,type:l[t].medalType,address:L[s].medal});H(!0)}}Z(e),W(!1)}},xe=()=>E.tokenId>0?J(!0):ee(!0);return m.jsxs(m.Fragment,{children:[m.jsx(c,{isOpen:P,onOpenChange:()=>J(!1)}),m.jsx(p,{open:$,onOpenChange:()=>ee(!1)}),D?V?m.jsxs("div",{className:"my-26 flex flex-col items-center justify-center text-gray-500",children:[m.jsx(o,{className:"w-[30px] animate-spin",color:"#6b7280"}),z("Loading...")]}):G?m.jsx("div",{className:"grid grid-cols-1 gap-2 pb-[80px] sm:grid-cols-2 sm:gap-[22px]",children:X.map(((e,s)=>m.jsx(m.Fragment,{children:e.medals.length>0&&m.jsx(m.Fragment,{children:m.jsx(f,{className:"rounded-[10px] sm:rounded-[12px] sm:border sm:border-[#F4F3F8]",type:"single",collapsible:!0,children:m.jsxs(h,{value:"item-".concat(s),className:"",children:[m.jsx(u,{className:"rounded-[10px] bg-[#F9FAFB] text-[14px] text-[#2C2C2C] sm:rounded-[12px]",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(j,{chainId:T,tokenAddress:e.token,symbol:e.name,className:"mr-[10px] h-[30px] w-[30px] lg:h-[36px] lg:w-[36px]"})," ",e.name,"(",e.medals.length,")"]})}),m.jsx(g,{children:e.medals.map(((e,s)=>m.jsxs("div",{className:N("flex items-center justify-between p-[14px]"),children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("img",{src:1===e.type?S:A,className:"mr-1 w-[50px]"}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-[14px] text-[#333333]",children:1===e.type?z("newMedal.text5"):z("newMedal.text4")}),m.jsxs("span",{className:"text-[12px] text-[#797979]",children:["ID: ",e.id]})]})]}),m.jsx("div",{className:"flex items-center",children:m.jsx(w,{onClick:()=>{var s;s=e,R(!0),te(s)},type:"green",size:"small",children:z("newMedal.text7")})})]},s)))})]})})})})))}):m.jsxs("div",{className:"flex flex-col items-center justify-center py-[20px]",children:[m.jsx("img",{src:y,alt:"",width:97.5}),m.jsx("span",{className:"text-center text-[12px] text-[#8A8A8A] sm:mt-4 sm:text-[14px]",children:z("newMedal.text18")}),m.jsx(w,{onClick:xe,type:"green",size:"medium",className:"mt-5 flex justify-center text-[14px]",children:z("newMedal.text1")})]}):m.jsxs("div",{className:"flex flex-col items-center justify-center py-[20px]",children:[m.jsx("img",{src:y,alt:"",width:97.5}),m.jsx("span",{className:"text-center text-[12px] text-[#8A8A8A] sm:mt-4 sm:text-[14px]",children:z("newMedal.text18")}),m.jsx(w,{onClick:xe,type:"green",size:"medium",className:"mt-5 flex justify-center text-[14px]",children:z("newMedal.text1")})]}),m.jsx(b,{open:Q,onOpenChange:()=>R(!1),className:"px-1 py-4 sm:px-0",children:m.jsxs("div",{className:"flex flex-col sm:px-[25px]",children:[m.jsx("span",{className:"text-[18px] text-[#101828] sm:text-[20px]",children:z("newMedal.text19")}),m.jsx("span",{className:"mt-[12px] text-[14px] text-[#475467]",children:z("newMedal.text20")}),m.jsxs("div",{className:"mt-[13px] flex w-full items-start justify-between rounded-[12px] border border-[#04CC79] bg-[#F5FFF7] p-[16px_22px] sm:mt-[20px]",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("img",{src:1===(null==se?void 0:se.type)?S:A,className:"w-[40px] rounded-[8px]"}),m.jsxs("div",{className:"flex flex-col pl-[10px] text-[17px]",children:[m.jsx("span",{className:"text-[14px] font-black text-[#04CC79]",children:1===(null==se?void 0:se.type)?z("newMedal.text5"):z("newMedal.text4")}),m.jsxs("span",{className:"text-[14px] text-[#04CC79]",children:["ID:",null==se?void 0:se.id]})]})]}),m.jsx("img",{src:O,alt:""})]}),m.jsx("div",{className:"mt-[20px] w-full",children:m.jsx(v,{placeholder:z("Please enter the transfer address"),onChange:e=>{return s=e.target.value,void le(s);var s},value:ae,onFocus:()=>{_(!0)},onBlur:()=>{_(!1)},className:"mt-2 border-none bg-[#ECECED] py-[20px] text-center text-sm/[19px] text-[#8E8E93] shadow-none"})}),m.jsx("div",{className:"mt-[20px] flex w-full items-center justify-between",children:m.jsx(w,{onClick:async()=>{U(!0);try{if(se){const{request:e}=await C(d,{abi:M.abi,address:se.address,functionName:"transferFrom",args:[D,ae,BigInt(se.id)]}),s=await F(d,e);await k(d,{hash:s}),q(z("newMedal.text13")),U(!1);const t=Array.isArray(se)?se:[se],a=X.map(((e,s)=>{const a=t.find((e=>e.key===s));return a?{...e,medals:e.medals.filter((e=>e.id!==a.id))}:e}));Z(a),R(!1),le("")}}catch(e){return U(!1),le(""),q(z("Enter the correct address"))}},disabled:0==ae.length,isLoading:K,type:"green",size:"small",className:"w-full text-[17px] sm:pt-[3px]",children:z("newMedal.text7")})})]})})]})};export{E as default};
