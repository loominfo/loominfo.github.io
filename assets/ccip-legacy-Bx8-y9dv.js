System.register(["./index-legacy-C2ELeSjt.js"],(function(e,t){"use strict";var a,s,r,n,o,c,d,u,i,l,f;return{setters:[e=>{a=e.aY,s=e.bc,r=e.b9,n=e.bd,o=e.be,c=e.bf,d=e.bg,u=e.bh,i=e.aG,l=e.bi,f=e.aW}],execute:function(){function t(e,t){if(!a(e,{strict:!1}))throw new s({address:e});if(!a(t,{strict:!1}))throw new s({address:t});return e.toLowerCase()===t.toLowerCase()}e({ccipRequest:m,offchainLookup:async function(e,{blockNumber:a,blockTag:s,data:r,to:n}){const{args:o}=c({data:r,abi:[b]}),[l,f,h,w,g]=o,{ccipRead:k}=e,x=k&&"function"==typeof k?.request?k.request:m;try{if(!t(n,l))throw new y({sender:l,to:n});const r=await x({data:h,sender:l,urls:f}),{data:o}=await d(e,{blockNumber:a,blockTag:s,data:u([w,i([{type:"bytes"},{type:"bytes"}],[r,g])]),to:n});return o}catch(e){throw new p({callbackSelector:w,cause:e,data:r,extraData:g,sender:l,urls:f})}}});class p extends r{constructor({callbackSelector:e,cause:t,data:a,extraData:s,sender:r,urls:o}){super(t.shortMessage||"An error occurred while fetching for an offchain result.",{cause:t,metaMessages:[...t.metaMessages||[],t.metaMessages?.length?"":[],"Offchain Gateway Call:",o&&["  Gateway URL(s):",...o.map((e=>`    ${n(e)}`))],`  Sender: ${r}`,`  Data: ${a}`,`  Callback selector: ${e}`,`  Extra data: ${s}`].flat(),name:"OffchainLookupError"})}}class h extends r{constructor({result:e,url:t}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${n(t)}`,`Response: ${o(e)}`],name:"OffchainLookupResponseMalformedError"})}}class y extends r{constructor({sender:e,to:t}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${t}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}e("offchainLookupSignature","0x556f1830");const b=e("offchainLookupAbiItem",{name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]});async function m({data:e,sender:t,urls:a}){let s=new Error("An unknown error occurred.");for(let r=0;r<a.length;r++){const n=a[r],c=n.includes("{data}")?"GET":"POST",d="POST"===c?{data:e,sender:t}:void 0,u="POST"===c?{"Content-Type":"application/json"}:{};try{const a=await fetch(n.replace("{sender}",t.toLowerCase()).replace("{data}",e),{body:JSON.stringify(d),headers:u,method:c});let r;if(r=a.headers.get("Content-Type")?.startsWith("application/json")?(await a.json()).data:await a.text(),!a.ok){s=new l({body:d,details:r?.error?o(r.error):a.statusText,headers:a.headers,status:a.status,url:n});continue}if(!f(r)){s=new h({result:r,url:n});continue}return r}catch(e){s=new l({body:d,details:e.message,url:n})}}throw s}}}}));
