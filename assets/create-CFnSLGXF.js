import{c as e,f as a,x as t,aH as s,u as n,aI as r,e as c,a as l,C as i,r as m,aJ as o,Y as d,j as x,a9 as p,I as h,aK as f,J as u,am as g,g as v,an as j,ao as b,aL as N,aM as k,s as I,w,h as y,q as C,aN as S,U as _,aA as F,aB as B,B as A,aO as O,aP as E,aQ as P}from"./index-B22ef-ay.js";import{A as U}from"./arrow-left-b9rq6gzM.js";const D=[54.44,54.5,60,57.86,60,60.48];function L(){const L=e.c(169),R=a(),z=t(),q=s(),{t:J,i18n:K}=n(),{switchChain:M}=r(),{updateRole:T}=c(),{toast:G}=l(),{address:H}=i(),[Q,W]=m.useState(),[Y,V]=m.useState(!1),[X,Z]=m.useState(!1),[$,ee]=m.useState(!1),[ae,te]=m.useState(""),{createCard:se}=m.useContext(o);let ne;L[0]===Symbol.for("react.memo_cache_sentinel")?(ne={nickname:"",avatarIndex:0,code:""},L[0]=ne):ne=L[0];const[re,ce]=m.useState(ne);let le;L[1]===Symbol.for("react.memo_cache_sentinel")?(le={parent:0,self:0},L[1]=le):le=L[1];const[ie,me]=m.useState(le),[oe,de]=m.useState(!1),[xe,pe]=m.useState(!1);let he;L[2]!==R?(he=async e=>{const a=f(e,R),[t]=await u(v,{contracts:[{abi:g.abi,address:g.networks[R].address,functionName:"cardInfoMap",args:[BigInt(a)]}]});if(t.result){const e=j(t.result[0],"string"),a=b(e);BigInt(t.result[0])===N||te(a)}},L[2]=R,L[3]=he):he=L[3];const fe=he;let ue,ge,ve,je,be;L[4]!==fe||L[5]!==q?(ue=()=>{const e=q.get("code"),a=q.get("chainId");e&&(ce((a=>({...a,code:e}))),fe(e)),a&&W(Number(a))},L[4]=fe,L[5]=q,L[6]=ue):ue=L[6],L[7]===Symbol.for("react.memo_cache_sentinel")?(ge=[],L[7]=ge):ge=L[7],m.useEffect(ue,ge),L[8]!==R||L[9]!==Q||L[10]!==M?(ve=()=>{Q&&Q!==R&&M({chainId:Q})},L[8]=R,L[9]=Q,L[10]=M,L[11]=ve):ve=L[11],L[12]!==R||L[13]!==Q?(je=[R,Q],L[12]=R,L[13]=Q,L[14]=je):je=L[14],m.useEffect(ve,je),L[15]!==fe||L[16]!==re?(be=async(e,a)=>{if("nickname"==e){if(new Blob([a.toString()]).size>6)return pe(!0);pe(!1)}if("code"==e){6==new Blob([a.toString()]).size?fe(a.toString().toUpperCase()):te("")}ce({...re,[e]:a})},L[15]=fe,L[16]=re,L[17]=be):be=L[17];const Ne=be;let ke;L[18]===Symbol.for("react.memo_cache_sentinel")?(ke=()=>{Z(!1),V(!0)},L[18]=ke):ke=L[18];const Ie=ke;let we;L[19]!==re.avatarIndex||L[20]!==re.code||L[21]!==re.nickname||L[22]!==H||L[23]!==R||L[24]!==se||L[25]!==Y||L[26]!==oe||L[27]!==J||L[28]!==G?(we=async()=>{if(""===re.nickname.toString().trim())return G(J("Invalid nickname"));if(oe)return;if(re.nickname.length<=0)return G(J("Invalid nickname"));if(re.code.length>0&&re.code.length<6)return G(J("Invalid invitation code"));if(!Y)return G(J("Risk Tips"));de(!0);const e=k(re.nickname,{size:6}),a=6===re.code.length?f(re.code.toUpperCase(),R):10124;try{const{request:t}=await I(v,{abi:g.abi,address:g.networks[R].address,functionName:"makeCard",args:[e,BigInt(re.avatarIndex),BigInt(a)]}),s=await w(v,t);await y(v,{hash:s});const n=await C(v,{abi:S.abi,address:S.networks[R].address,functionName:"balanceOf",args:[H]}),r=await C(v,{abi:S.abi,address:S.networks[R].address,functionName:"tokenOfOwnerByIndex",args:[H,n-BigInt(1)]});se({nickname:re.nickname,cardId:Number(r),createAt:0,id:r.toString(16),imageIndex:re.avatarIndex,owner:H,parentCardId:Number(a)}),me({parent:Number(a),self:Number(r)}),ee(!0)}catch(t){}de(!1)},L[19]=re.avatarIndex,L[20]=re.code,L[21]=re.nickname,L[22]=H,L[23]=R,L[24]=se,L[25]=Y,L[26]=oe,L[27]=J,L[28]=G,L[29]=we):we=L[29];const ye=we;let Ce;L[30]!==re.avatarIndex||L[31]!==re.nickname||L[32]!==z||L[33]!==ie.parent||L[34]!==ie.self||L[35]!==T?(Ce=()=>{T((e=>({...e,avatarIndex:re.avatarIndex,level:0,nickname:re.nickname,parentTokenId:ie.parent,tokenId:ie.self}))),z("/")},L[30]=re.avatarIndex,L[31]=re.nickname,L[32]=z,L[33]=ie.parent,L[34]=ie.self,L[35]=T,L[36]=Ce):Ce=L[36];const Se=Ce;let _e,Fe,Be,Ae,Oe,Ee;L[37]===Symbol.for("react.memo_cache_sentinel")?(_e=x.jsx(_,{to:"/",children:x.jsx(U,{className:"text-[#8F9CA8]"})}),L[37]=_e):_e=L[37],L[38]!==J?(Fe=J("Create a New Role"),L[38]=J,L[39]=Fe):Fe=L[39],L[40]!==Fe?(Be=x.jsxs("div",{className:"flex items-center lg:hidden",children:[_e,x.jsx("div",{className:"w-full text-center text-[17px] text-[#333333]",children:Fe})]}),L[40]=Fe,L[41]=Be):Be=L[41],L[42]!==J?(Ae=J("Please enter a new character nickname"),L[42]=J,L[43]=Ae):Ae=L[43],L[44]===Symbol.for("react.memo_cache_sentinel")?(Oe=x.jsx("span",{className:"text-[#FF0000]",children:"*"}),L[44]=Oe):Oe=L[44],L[45]!==Ae?(Ee=x.jsxs("div",{className:"mt-[30px] text-sm/[19px] text-[#333333]",children:[Ae,Oe]}),L[45]=Ae,L[46]=Ee):Ee=L[46];const Pe=re.nickname;let Ue,De,Le;L[47]!==Ne?(Ue=e=>Ne("nickname",e.target.value),L[47]=Ne,L[48]=Ue):Ue=L[48],L[49]!==J?(De=J("6 alphanumeric characters"),L[49]=J,L[50]=De):De=L[50],L[51]!==re.nickname||L[52]!==Ue||L[53]!==De?(Le=x.jsx(h,{maxLength:6,value:Pe,name:"nickname",onChange:Ue,placeholder:De,className:"mt-2 h-[45px] border-none bg-[#F4F3F8] px-4 text-sm/[19px] text-[#333333] shadow-none placeholder:text-[#8E8E93]"}),L[51]=re.nickname,L[52]=Ue,L[53]=De,L[54]=Le):Le=L[54];const Re=xe?"flex text-sm/[19px] text-[#FF0000]":"hidden";let ze,qe,Je;L[55]!==Re?(ze=d(Re),L[55]=Re,L[56]=ze):ze=L[56],L[57]!==J?(qe=J("Exceeds the character limit"),L[57]=J,L[58]=qe):qe=L[58],L[59]!==ze||L[60]!==qe?(Je=x.jsx("div",{className:ze,children:qe}),L[59]=ze,L[60]=qe,L[61]=Je):Je=L[61];const Ke=xe?"mt-[11px]":"mt-[30px]";let Me,Te,Ge,He,Qe,We,Ye,Ve,Xe,Ze;L[62]!==Ke?(Me=d(Ke,"text-sm/[19px] text-[#333333]"),L[62]=Ke,L[63]=Me):Me=L[63],L[64]!==J?(Te=J("Please select a new character image"),L[64]=J,L[65]=Te):Te=L[65],L[66]===Symbol.for("react.memo_cache_sentinel")?(Ge=x.jsx("span",{className:"text-[#FF0000]",children:"*"}),L[66]=Ge):Ge=L[66],L[67]!==Me||L[68]!==Te?(He=x.jsxs("div",{className:Me,children:[Te,Ge]}),L[67]=Me,L[68]=Te,L[69]=He):He=L[69],L[70]!==re.avatarIndex||L[71]!==Ne?(Qe=D.map(((e,a)=>x.jsx("div",{onClick:()=>Ne("avatarIndex",a),className:d("flex h-[115px] w-[115px] items-center justify-center rounded-[10px] bg-cover",re.avatarIndex===a&&"mainBorder border-2"),children:x.jsx("img",{src:p(a),className:"rounded-[10px]"})},a))),L[70]=re.avatarIndex,L[71]=Ne,L[72]=Qe):Qe=L[72],L[73]!==Qe?(We=x.jsx("div",{className:"mt-[7px] grid grid-cols-3 gap-x-2.5 gap-y-[10px]",children:Qe}),L[73]=Qe,L[74]=We):We=L[74],L[75]!==J?(Ye=J("Please enter the invitation code (optional)"),L[75]=J,L[76]=Ye):Ye=L[76],L[77]!==Ye?(Ve=x.jsx("div",{className:"mt-[30px] text-sm/[19px] text-[#333333]",children:Ye}),L[77]=Ye,L[78]=Ve):Ve=L[78],L[79]!==Ne?(Xe=e=>Ne("code",e.target.value),L[79]=Ne,L[80]=Xe):Xe=L[80],L[81]!==re.code||L[82]!==Xe?(Ze=x.jsx(h,{maxLength:6,value:re.code,name:"code",onChange:Xe,className:"mt-2 h-[45px] border-none bg-[#F4F3F8] px-4 text-sm/[19px] text-[#333333] shadow-none placeholder:text-[#333333]"}),L[81]=re.code,L[82]=Xe,L[83]=Ze):Ze=L[83];const $e=ae.length>0?"mt-[5px] text-sm/[19px] text-[#333333]":"hidden";let ea,aa,ta;L[84]!==$e?(ea=d($e),L[84]=$e,L[85]=ea):ea=L[85],L[86]!==J?(aa=J("Inviting user nickname:"),L[86]=J,L[87]=aa):aa=L[87],L[88]!==ae||L[89]!==ea||L[90]!==aa?(ta=x.jsxs("div",{className:ea,children:[aa,ae]}),L[88]=ae,L[89]=ea,L[90]=aa,L[91]=ta):ta=L[91];const sa="en"===K.language&&"mt-1",na=ae.length>0?"mt-[10px]":"mt-[25px]";let ra,ca,la,ia,ma,oa,da,xa,pa,ha,fa,ua,ga,va,ja,ba,Na,ka,Ia,wa,ya,Ca,Sa,_a,Fa,Ba,Aa,Oa,Ea;return L[92]!==sa||L[93]!==na?(ra=d("flex items-start",sa,na),L[92]=sa,L[93]=na,L[94]=ra):ra=L[94],L[95]!==Y?(ca=Y?x.jsx(F,{onClick:()=>V(!Y),className:"mainColor mt-1 h-[15px] w-[15px]"}):x.jsx("i",{onClick:()=>V(!Y),className:"mt-1 h-[12px] w-[12px] shrink-0 border border-black"}),L[95]=Y,L[96]=ca):ca=L[96],L[97]===Symbol.for("react.memo_cache_sentinel")?(la=()=>Z(!0),L[97]=la):la=L[97],L[98]===Symbol.for("react.memo_cache_sentinel")?(ia=x.jsx("span",{className:"border-b border-[#D7A001] font-normal text-[#D7A001]",children:"User Agreement"}),L[98]=ia):ia=L[98],L[99]!==J?(ma=x.jsx("span",{onClick:la,className:"ml-1 max-w-72 whitespace-pre-wrap text-[13px] text-[#333333] lg:text-[14px]",children:x.jsxs(B,{t:J,i18nKey:"I have carefully read and fully understood the Privacy Agreement, Risk Warning and User Agreement.",children:["I have carefully read and fully understood the"," ",ia,"."]})}),L[99]=J,L[100]=ma):ma=L[100],L[101]!==ra||L[102]!==ca||L[103]!==ma?(oa=x.jsxs("div",{className:ra,children:[ca,ma]}),L[101]=ra,L[102]=ca,L[103]=ma,L[104]=oa):oa=L[104],L[105]!==J?(da=J("Create"),L[105]=J,L[106]=da):da=L[106],L[107]!==oe||L[108]!==ye||L[109]!==da?(xa=x.jsx(A,{type:"green",isLoading:oe,onClick:ye,className:"mt-3 w-full self-center py-[10px] sm:text-center",children:da}),L[107]=oe,L[108]=ye,L[109]=da,L[110]=xa):xa=L[110],L[111]!==Be||L[112]!==Ee||L[113]!==Le||L[114]!==Je||L[115]!==He||L[116]!==We||L[117]!==Ve||L[118]!==Ze||L[119]!==ta||L[120]!==oa||L[121]!==xa?(pa=x.jsx("div",{className:"pb-16 lg:flex lg:h-screen lg:w-full lg:items-center lg:justify-center",children:x.jsxs("div",{className:"overflow-auto px-[15px] pb-5 pt-[20px] lg:flex lg:flex-col lg:justify-center lg:pt-0",children:[Be,Ee,Le,Je,He,We,Ve,Ze,ta,oa,xa]})}),L[111]=Be,L[112]=Ee,L[113]=Le,L[114]=Je,L[115]=He,L[116]=We,L[117]=Ve,L[118]=Ze,L[119]=ta,L[120]=oa,L[121]=xa,L[122]=pa):pa=L[122],L[123]===Symbol.for("react.memo_cache_sentinel")?(ha=()=>Z(!1),L[123]=ha):ha=L[123],L[124]!==X?(fa=x.jsx(O,{open:X,onOpenChange:ha,onConfirm:Ie}),L[124]=X,L[125]=fa):fa=L[125],L[126]===Symbol.for("react.memo_cache_sentinel")?(ua=()=>ee(!1),L[126]=ua):ua=L[126],L[127]===Symbol.for("react.memo_cache_sentinel")?(ga=x.jsx("img",{src:E,className:"w-[48px]"}),L[127]=ga):ga=L[127],L[128]!==J?(va=J("Created successfully!"),L[128]=J,L[129]=va):va=L[129],L[130]!==va?(ja=x.jsx("div",{className:"mb-1 mt-[12px] text-base text-[#333333]",children:va}),L[130]=va,L[131]=ja):ja=L[131],L[132]!==J?(ba=J("Do you want to jump to the new role immediately?"),L[132]=J,L[133]=ba):ba=L[133],L[134]!==ba?(Na=x.jsx("span",{className:"text-[14px] text-[#797979]",children:ba}),L[134]=ba,L[135]=Na):Na=L[135],L[136]!==re.avatarIndex?(ka=p(re.avatarIndex),L[136]=re.avatarIndex,L[137]=ka):ka=L[137],L[138]!==ka?(Ia=x.jsx("img",{src:ka,className:"h-[60px] w-[60px] rounded-[10px]"}),L[138]=ka,L[139]=Ia):Ia=L[139],L[140]!==re.nickname?(wa=x.jsx("span",{className:"text-lg text-[#2C2C2C]",children:re.nickname}),L[140]=re.nickname,L[141]=wa):wa=L[141],L[142]!==ie.self?(ya=x.jsxs("span",{className:"text-sm font-normal text-[#797979]",children:["ID:",ie.self]}),L[142]=ie.self,L[143]=ya):ya=L[143],L[144]!==wa||L[145]!==ya?(Ca=x.jsxs("div",{className:"ml-4 flex flex-col",children:[wa,ya]}),L[144]=wa,L[145]=ya,L[146]=Ca):Ca=L[146],L[147]!==Ia||L[148]!==Ca?(Sa=x.jsxs("div",{className:"mainBorder my-3.5 flex w-full items-center justify-start rounded-[12px] border px-[19px] py-3",children:[Ia,Ca]}),L[147]=Ia,L[148]=Ca,L[149]=Sa):Sa=L[149],L[150]!==ja||L[151]!==Na||L[152]!==Sa?(_a=x.jsxs("div",{className:"text-left",children:[ga,ja,Na,Sa]}),L[150]=ja,L[151]=Na,L[152]=Sa,L[153]=_a):_a=L[153],L[154]!==J?(Fa=J("Confirm"),L[154]=J,L[155]=Fa):Fa=L[155],L[156]!==Se||L[157]!==Fa?(Ba=x.jsx(A,{onClick:Se,type:"primary",className:"m-auto my-[30px] mt-[40px] h-[43px] w-full",children:Fa}),L[156]=Se,L[157]=Fa,L[158]=Ba):Ba=L[158],L[159]!==_a||L[160]!==Ba?(Aa=x.jsxs("div",{className:"px-4 pb-4 pt-[28px] text-center",children:[_a,Ba]}),L[159]=_a,L[160]=Ba,L[161]=Aa):Aa=L[161],L[162]!==$||L[163]!==Aa?(Oa=x.jsx(P,{isOpen:$,onClose:ua,className:"",children:Aa}),L[162]=$,L[163]=Aa,L[164]=Oa):Oa=L[164],L[165]!==pa||L[166]!==fa||L[167]!==Oa?(Ea=x.jsxs(x.Fragment,{children:[pa,fa,Oa]}),L[165]=pa,L[166]=fa,L[167]=Oa,L[168]=Ea):Ea=L[168],Ea}export{L as default};
