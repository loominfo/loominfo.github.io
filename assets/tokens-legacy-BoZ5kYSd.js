System.register(["./index-legacy-C2ELeSjt.js","./router-legacy-D_MUQTrs.js","./Token-legacy-DIElUvJA.js","./USDTToken-legacy-W1aMGjpd.js"],(function(t,e){"use strict";var s,i,r,n,a,o,c,h,u,l,d,p,f,m,b,y,x,g,v,O,w,R,j,N,C,k,S,I,A,E,T,q,P,F,U,D,M,_,Q,B,L;return{setters:[t=>{s=t.br,i=t.bs,r=t.bt,n=t.b1,a=t.bu,o=t.K,c=t.J,h=t.bv,u=t.bw,l=t.bx,d=t.by,p=t.bz,f=t.bA,m=t.bB,b=t.bC,y=t.bD,x=t.bE,g=t.bF,v=t.bG,O=t.bH,w=t.r,R=t.bI,j=t.b,N=t.bJ,C=t.bK,k=t.f,S=t.C,I=t.d,A=t.j,E=t.bL,T=t.t,q=t.L,P=t.a_,F=t.O,U=t.q,D=t.g,M=t.b8,_=t.bM},t=>{Q=t.r},t=>{B=t.T},t=>{L=t.U}],execute:function(){function e(t){return"number"==typeof t?t:"wei"===t?0:Math.abs(s[t])}async function H(t,s){const{address:c,blockNumber:h,blockTag:u,chainId:l,token:d,unit:p="ether"}=s;if(d)try{return await K(t,{balanceAddress:c,chainId:l,symbolType:"string",tokenAddress:d})}catch(e){if("ContractFunctionExecutionError"===e.name){const e=await K(t,{balanceAddress:c,chainId:l,symbolType:"bytes32",tokenAddress:d}),s=i(r(e.symbol,{dir:"right"}));return{...e,symbol:s}}throw e}const f=t.getClient({chainId:l}),m=n(f,a,"getBalance"),b=await m(h?{address:c,blockNumber:h}:{address:c,blockTag:u}),y=t.chains.find((t=>t.id===l))??f.chain;return{decimals:y.nativeCurrency.decimals,formatted:o(b,e(p)),symbol:y.nativeCurrency.symbol,value:b}}async function K(t,s){const{balanceAddress:i,chainId:r,symbolType:n,tokenAddress:a,unit:h}=s,u={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:n}]}],address:a},[l,d,p]=await c(t,{allowFailure:!1,contracts:[{...u,functionName:"balanceOf",args:[i],chainId:r},{...u,functionName:"decimals",chainId:r},{...u,functionName:"symbol",chainId:r}]});return{decimals:d,formatted:o(l??"0",e(h??d)),symbol:p,value:l}}var W=class extends h{constructor(t,e){super(),this.options=e,this.#t=t,this.#e=null,this.#s=u(),this.options.experimental_prefetchInRender||this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#t;#i=void 0;#r=void 0;#n=void 0;#a;#o;#s;#e;#c;#h;#u;#l;#d;#p;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#i.addObserver(this),z(this.#i,this.options)?this.#m():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return J(this.#i,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return J(this.#i,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#x(),this.#i.removeObserver(this)}setOptions(t){const e=this.options,s=this.#i;if(this.options=this.#t.defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof l(this.options.enabled,this.#i))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#g(),this.#i.setOptions(this.options),e._defaulted&&!d(this.options,e)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#i,observer:this});const i=this.hasListeners();i&&$(this.#i,s,this.options,e)&&this.#m(),this.updateResult(),!i||this.#i===s&&l(this.options.enabled,this.#i)===l(e.enabled,this.#i)&&p(this.options.staleTime,this.#i)===p(e.staleTime,this.#i)||this.#v();const r=this.#O();!i||this.#i===s&&l(this.options.enabled,this.#i)===l(e.enabled,this.#i)&&r===this.#p||this.#w(r)}getOptimisticResult(t){const e=this.#t.getQueryCache().build(this.#t,t),s=this.createResult(e,t);return function(t,e){return!d(t.getCurrentResult(),e)}(this,s)&&(this.#n=s,this.#o=this.options,this.#a=this.#i.state),s}getCurrentResult(){return this.#n}trackResult(t,e){const s={};return Object.keys(t).forEach((i=>{Object.defineProperty(s,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),e?.(i),t[i])})})),s}trackProp(t){this.#f.add(t)}getCurrentQuery(){return this.#i}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#t.defaultQueryOptions(t),s=this.#t.getQueryCache().build(this.#t,e);return s.fetch().then((()=>this.createResult(s,e)))}fetch(t){return this.#m({...t,cancelRefetch:t.cancelRefetch??!0}).then((()=>(this.updateResult(),this.#n)))}#m(t){this.#g();let e=this.#i.fetch(this.options,t);return t?.throwOnError||(e=e.catch(f)),e}#v(){this.#y();const t=p(this.options.staleTime,this.#i);if(m||this.#n.isStale||!b(t))return;const e=y(this.#n.dataUpdatedAt,t)+1;this.#l=setTimeout((()=>{this.#n.isStale||this.updateResult()}),e)}#O(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#i):this.options.refetchInterval)??!1}#w(t){this.#x(),this.#p=t,!m&&!1!==l(this.options.enabled,this.#i)&&b(this.#p)&&0!==this.#p&&(this.#d=setInterval((()=>{(this.options.refetchIntervalInBackground||x.isFocused())&&this.#m()}),this.#p))}#b(){this.#v(),this.#w(this.#O())}#y(){this.#l&&(clearTimeout(this.#l),this.#l=void 0)}#x(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(t,e){const s=this.#i,i=this.options,r=this.#n,n=this.#a,a=this.#o,o=t!==s?t.state:this.#r,{state:c}=t;let h,l={...c},d=!1;if(e._optimisticResults){const r=this.hasListeners(),n=!r&&z(t,e),a=r&&$(t,s,e,i);(n||a)&&(l={...l,...g(c.data,t.options)}),"isRestoring"===e._optimisticResults&&(l.fetchStatus="idle")}let{error:p,errorUpdatedAt:f,status:m}=l;if(e.select&&void 0!==l.data)if(r&&l.data===n?.data&&e.select===this.#c)h=this.#h;else try{this.#c=e.select,h=e.select(l.data),h=v(r?.data,h,e),this.#h=h,this.#e=null}catch(t){this.#e=t}else h=l.data;if(void 0!==e.placeholderData&&void 0===h&&"pending"===m){let s;if(r?.isPlaceholderData&&e.placeholderData===a?.placeholderData)s=r.data;else if(s="function"==typeof e.placeholderData?e.placeholderData(this.#u?.state.data,this.#u):e.placeholderData,e.select&&void 0!==s)try{s=e.select(s),this.#e=null}catch(t){this.#e=t}void 0!==s&&(m="success",h=v(r?.data,s,e),d=!0)}this.#e&&(p=this.#e,h=this.#h,f=Date.now(),m="error");const b="fetching"===l.fetchStatus,y="pending"===m,x="error"===m,O=y&&b,w=void 0!==h,R={status:m,fetchStatus:l.fetchStatus,isPending:y,isSuccess:"success"===m,isError:x,isInitialLoading:O,isLoading:O,data:h,dataUpdatedAt:l.dataUpdatedAt,error:p,errorUpdatedAt:f,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>o.dataUpdateCount||l.errorUpdateCount>o.errorUpdateCount,isFetching:b,isRefetching:b&&!y,isLoadingError:x&&!w,isPaused:"paused"===l.fetchStatus,isPlaceholderData:d,isRefetchError:x&&w,isStale:G(t,e),refetch:this.refetch,promise:this.#s};if(this.options.experimental_prefetchInRender){const e=t=>{"error"===R.status?t.reject(R.error):void 0!==R.data&&t.resolve(R.data)},i=()=>{const t=this.#s=R.promise=u();e(t)},r=this.#s;switch(r.status){case"pending":t.queryHash===s.queryHash&&e(r);break;case"fulfilled":"error"!==R.status&&R.data===r.value||i();break;case"rejected":"error"===R.status&&R.error===r.reason||i()}}return R}updateResult(){const t=this.#n,e=this.createResult(this.#i,this.options);this.#a=this.#i.state,this.#o=this.options,void 0!==this.#a.data&&(this.#u=this.#i),d(e,t)||(this.#n=e,this.#R({listeners:(()=>{if(!t)return!0;const{notifyOnChangeProps:e}=this.options,s="function"==typeof e?e():e;if("all"===s||!s&&!this.#f.size)return!0;const i=new Set(s??this.#f);return this.options.throwOnError&&i.add("error"),Object.keys(this.#n).some((e=>{const s=e;return this.#n[s]!==t[s]&&i.has(s)}))})()}))}#g(){const t=this.#t.getQueryCache().build(this.#t,this.options);if(t===this.#i)return;const e=this.#i;this.#i=t,this.#r=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#R(t){O.batch((()=>{t.listeners&&this.listeners.forEach((t=>{t(this.#n)})),this.#t.getQueryCache().notify({query:this.#i,type:"observerResultsUpdated"})}))}};function z(t,e){return function(t,e){return!1!==l(e.enabled,t)&&void 0===t.state.data&&!("error"===t.state.status&&!1===e.retryOnMount)}(t,e)||void 0!==t.state.data&&J(t,e,e.refetchOnMount)}function J(t,e,s){if(!1!==l(e.enabled,t)){const i="function"==typeof s?s(t):s;return"always"===i||!1!==i&&G(t,e)}return!1}function $(t,e,s,i){return(t!==e||!1===l(i.enabled,t))&&(!s.suspense||"error"!==t.state.status)&&G(t,s)}function G(t,e){return!1!==l(e.enabled,t)&&t.isStaleByTime(p(e.staleTime,t))}function V(t){return JSON.stringify(t,((t,e)=>function(t){if(!X(t))return!1;const e=t.constructor;if(void 0===e)return!0;const s=e.prototype;return!!X(s)&&!!s.hasOwnProperty("isPrototypeOf")}(e)?Object.keys(e).sort().reduce(((t,s)=>(t[s]=e[s],t)),{}):"bigint"==typeof e?e.toString():e))}function X(t){return"[object Object]"===Object.prototype.toString.call(t)}function Y(t){const{_defaulted:e,behavior:s,gcTime:i,initialData:r,initialDataUpdatedAt:n,maxPages:a,meta:o,networkMode:c,queryFn:h,queryHash:u,queryKey:l,queryKeyHashFn:d,retry:p,retryDelay:f,structuralSharing:m,getPreviousPageParam:b,getNextPageParam:y,initialPageParam:x,_optimisticResults:g,enabled:v,notifyOnChangeProps:O,placeholderData:w,refetchInterval:R,refetchIntervalInBackground:j,refetchOnMount:N,refetchOnReconnect:C,refetchOnWindowFocus:k,retryOnMount:S,select:I,staleTime:A,suspense:E,throwOnError:T,config:q,connector:P,query:F,...U}=t;return U}function Z(t={}){return["balance",Y(t)]}var tt=w.createContext(!1);tt.Provider;var et=w.createContext(function(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}()),st=(t,e,s)=>e.fetchOptimistic(t).catch((()=>{s.clearReset()}));function it(t,e,s){const i=j(),r=w.useContext(tt),n=w.useContext(et),a=i.defaultQueryOptions(t);i.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=r?"isRestoring":"optimistic",(t=>{const e=t.staleTime;t.suspense&&(t.staleTime="function"==typeof e?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),"number"==typeof t.gcTime&&(t.gcTime=Math.max(t.gcTime,1e3)))})(a),((t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))})(a,n),(t=>{w.useEffect((()=>{t.clearReset()}),[t])})(n);const o=!i.getQueryCache().get(a.queryHash),[c]=w.useState((()=>new e(i,a))),h=c.getOptimisticResult(a),u=!r&&!1!==t.subscribed;if(w.useSyncExternalStore(w.useCallback((t=>{const e=u?c.subscribe(O.batchCalls(t)):N;return c.updateResult(),e}),[c,u]),(()=>c.getCurrentResult()),(()=>c.getCurrentResult())),w.useEffect((()=>{c.setOptions(a)}),[a,c]),((t,e)=>t?.suspense&&e.isPending)(a,h))throw st(a,c,n);if((({result:t,errorResetBoundary:e,throwOnError:s,query:i,suspense:r})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&(r&&void 0===t.data||R(s,[t.error,i])))({result:h,errorResetBoundary:n,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw h.error;if(i.getDefaultOptions().queries?._experimental_afterQuery?.(a,h),a.experimental_prefetchInRender&&!m&&((t,e)=>t.isLoading&&t.isFetching&&!e)(h,r)){const t=o?st(a,c,n):i.getQueryCache().get(a.queryHash)?.promise;t?.catch(N).finally((()=>{c.updateResult()}))}return a.notifyOnChangeProps?h:c.trackResult(h)}function rt(t){const e=function(t){return it(t,W)}({...t,queryKeyHashFn:V});return e.queryKey=t.queryKey,e}function nt(t={}){const{address:e,query:s={}}=t,i=C(t),r=k({config:i}),n=function(t,e={}){return{async queryFn({queryKey:e}){const{address:s,scopeKey:i,...r}=e[1];if(!s)throw new Error("address is required");return await H(t,{...r,address:s})??null},queryKey:Z(e)}}(i,{...t,chainId:t.chainId??r}),a=Boolean(e&&(s.enabled??!0));return rt({...s,...n,enabled:a})}t("default",(({_ishide:t,onTotalAmountsOut:e})=>{const{address:s}=S({config:D}),{data:i}=nt({address:s}),r=k(),{tokenList:n}=I(),[a,o]=w.useState("--"),[h,u]=w.useState([]),[l,d]=w.useState("0"),[p,f]=w.useState(0),[m,b]=w.useState(0);w.useEffect((()=>{s&&e(m+Number(l)+p)}),[l,p,m]);const y=async()=>{if(s)try{const e=await U(D,{abi:M.abi,address:M.networks[r].address,functionName:"router"}),n=await U(D,{abi:Q,address:e,functionName:"WETH"});if(i)try{const t=await(async(t,e,s,i)=>await U(D,{abi:Q,address:i,functionName:"getAmountsOut",args:[t,[e,s]]}))(i.value,n,L.networks[r].address,e);d(q(t[1]??0n))}catch(t){d("0")}const a=await U(D,{abi:_,address:L.networks[r].address,functionName:"balanceOf",args:[s]}),c=q(a);o(c),f(Number(c))}catch(t){}},x=async()=>{if(s&&n?.length)try{const[t,e]=await Promise.all([c(D,{contracts:n.map((t=>({abi:B.abi,address:t.token,functionName:"router"})))}),c(D,{contracts:n.map((t=>({abi:_,address:t.token,functionName:"balanceOf",args:[s]})))})]),i=L.networks[r]?.address;if(!i)return;const a=await Promise.all(n.map((async(s,r)=>{try{const n=t[r]?.result,a=e[r]?.result;if(!n||void 0===a)return{...s,amountsOut:0,balance:q(0n)};const o=await U(D,{abi:Q,address:n,functionName:"getAmountsOut",args:[a,[s.token,i]]}).catch((()=>[0n,0n]));return{...s,amountsOut:q(o[1]??0n),balance:q(a??0n)}}catch(t){return{...s,amountsOut:0,balance:q(e[r]?.result??0n)}}})));u(a),b(a.reduce(((t,e)=>t+Number(e.amountsOut)),0))}catch(t){}};return w.useEffect((()=>{s&&(n&&u(n.map((t=>({...t,amountsOut:0,balance:"0"})))),(async()=>{await Promise.all([y(),x()])})())}),[s,n]),A.jsx(A.Fragment,{children:A.jsxs("div",{className:"scroll-containers overflow-auto sm:h-[200px]",children:[A.jsxs("div",{className:"my-2 flex items-center justify-between px-[15px] sm:px-0",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx("img",{src:E,alt:"WhiteBNB",className:"sm:w-[36px]"}),A.jsx("div",{className:"ml-1",children:A.jsx("div",{className:"flex items-center",children:A.jsx("span",{className:"text-[#333]",children:"BNB"})})})]}),A.jsxs("div",{className:"flex flex-col items-end",children:[A.jsx("span",{className:"text-[#333]",children:t?T(q(i?.value??0n),2):"*****"}),A.jsx("span",{className:"text-[#8A8A8A]",children:t?"$"+T(l):"*****"})]})]}),A.jsxs("div",{className:"my-2 flex items-center justify-between px-[15px] sm:px-0",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx("img",{src:P,alt:"WhiteBNB",className:"sm:w-[36px]"}),A.jsx("div",{className:"ml-1",children:A.jsx("div",{className:"flex items-center",children:A.jsx("span",{className:"text-[#333]",children:"USDT"})})})]}),A.jsxs("div",{className:"flex flex-col items-end",children:[A.jsx("span",{className:"text-[#333]",children:t?T(a,2):"*****"}),A.jsx("span",{className:"text-[#8A8A8A]",children:t?"$"+T(a):"*****"})]})]}),h?.map((e=>A.jsxs("div",{className:"my-2 flex items-center justify-between px-[15px] sm:px-0",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(F,{chainId:r,tokenAddress:e.token,symbol:e.symbol,className:"h-[30px] w-[30px] lg:h-[36px] lg:w-[36px]"}),A.jsx("div",{className:"ml-1",children:A.jsx("div",{className:"flex items-center",children:A.jsx("span",{className:"text-[#333]",children:e.symbol})})})]}),A.jsxs("div",{className:"flex flex-col items-end",children:[A.jsxs("span",{className:"text-[#333]",children:[" ",t?T(e.balance):"*****"]}),A.jsx("span",{className:"text-[#8A8A8A]",children:t?"$"+T(Number(e.amountsOut)):"*****"})]})]},e.token)))]})})}))}}}));
